  {
  "output": {
    "header": "../_source/include/_generated/messages/",
    "source": "../_source/source/_generated/messages/",
    "include": "_generated/messages/"
  },
  "static_types": [
    "std::string", "irr::core::vector3df"
  ],
  "messageids": [
    [ "ObjectMoved"   ,  "0" ],
    [ "MarbleMoved"   ,  "1" ],
    [ "StepMsg"       ,  "2" ],
    [ "Trigger"       ,  "3" ],
    [ "PlayerRespawn" ,  "4" ],
    [ "CameraRespawn" ,  "5" ],
    [ "PlayerStunned" ,  "6" ],
    [ "Checkpoint"    ,  "7" ],
    [ "LapStart"      ,  "8" ],
    [ "PlayerFinished",  "9" ],
    [ "RaceFinished"  , "10" ],
    [ "Countdown"     , "11" ],
    [ "MarbleControl" , "12" ],
    [ "CancelRace"    , "13" ]
  ],
  "messages": {
    "ObjectMoved": {
      "comment": "This message is sent when a non-marble object has moved",
      "fields": [
        { "name": "ObjectId"       , "type": "irr::s32"            , "comment": "The ID of the object" },
        { "name": "Position"       , "type": "irr::core::vector3df", "comment": "The current position" },
        { "name": "Rotation"       , "type": "irr::core::vector3df", "comment": "The current rotation (Euler angles)" },
        { "name": "LinearVelocity" , "type": "irr::core::vector3df", "comment": "The linear velocity" },
        { "name": "AngularVelocity", "type": "irr::f32"            , "comment": "The angualar (rotation) velocity" }
      ]
    },
    "MarbleMoved": {
      "comment": "This message is sent when a marble is moved and contains additional information",
      "fields": [
        { "name": "ObjectId"       , "type": "irr::s32"            , "comment": "The ID of the object" },
        { "name": "Position"       , "type": "irr::core::vector3df", "comment": "The current position" },
        { "name": "Rotation"       , "type": "irr::core::vector3df", "comment": "The current rotation (Euler angles)" },
        { "name": "LinearVelocity" , "type": "irr::core::vector3df", "comment": "The linear velocity" },
        { "name": "AngularVelocity", "type": "irr::f32"            , "comment": "The angualar (rotation) velocity" },
        { "name": "CameraPosition" , "type": "irr::core::vector3df", "comment": "The position of the camera" },
        { "name": "CameraUp"       , "type": "irr::core::vector3df", "comment": "The Up-Vector of the camera" },
        { "name": "ControlX"       , "type": "irr::s8"             , "comment": "The marble's current controller state in X-Direction" },
        { "name": "ControlY"       , "type": "irr::s8"             , "comment": "The marble's current controller state in Y-Direction" },
        { "name": "Contact"        , "type": "bool"                , "comment": "A Flag indicating whether or not the marble is in contact with another object" },
        { "name": "ControlBrake"   , "type": "bool"                , "comment": "Flag indicating whether or not the marble's brake is active" },
        { "name": "ControlRearView", "type": "bool"                , "comment": "Flag indicating whether or not the marble's player looks behind" },
        { "name": "ControlRespawn" , "type": "bool"                , "comment": "Flag indicating whether or not the manual respawn button is pressed " }
      ]
    },
    "StepMsg": {
      "comment": "Message sent for every step (60 per second)",
      "fields": [
        { "name": "StepNo", "type": "irr::u32", "comment": "The current step number" }
      ]
    },
    "Trigger": {
      "comment": "Message indicating then a marble has triggered a trigger",
      "fields": [
        { "name": "TriggerId", "type": "irr::s32", "comment": "ID of the trigger" },
        { "name": "ObjectId" , "type": "irr::s32", "comment": "ID of the marble that caused the trigger" }
      ]
    },
    "PlayerRespawn": {
      "comment": "This message indicates that the respawn state of a player has changed",
      "fields": [
        { "name": "MarbleId", "type": "irr::s32", "comment": "ID of the marble" },
        { "name": "State"   , "type": "irr::u8" , "comment": "New respawn state (1 == Respawn Start, 2 == Respawn Done). Between State 1 and 2 a CameraRespawn is sent" }
      ]
    },
    "CameraRespawn": {
      "comment": "This message is sent between respawn state 1 and 2 to reposition the camera",
      "fields": [
        { "name": "MarbleId", "type": "irr::s32"            , "comment": "The ID of the marble which is respawning" },
        { "name": "Position", "type": "irr::core::vector3df", "comment": "The new position of the camera" },
        { "name": "Target"  , "type": "irr::core::vector3df", "comment": "The new target of the camera, i.e. the future position of the marble" }
      ]
    },
    "PlayerStunned": {
      "comment": "This message indicates that the stunned state of a player has changed",
      "fields": [
        { "name": "MarbleId", "type": "irr::s32", "comment": "ID of the marble" },
        { "name": "State"   , "type": "irr::u8" , "comment": "New stunned state (1 == Player stunned, 2 == Player recovered)" }
      ]
    },
    "Checkpoint": {
      "comment": "A player has passed a checkpoint",
      "fields": [
        { "name": "MarbleId"  , "type": "irr::s32", "comment": "ID of the marble" },
        { "name": "Checkpoint", "type": "irr::s32", "comment": "The checkpoint ID the player has passed" }
      ]
    },
    "LapStart": {
      "comment": "A player has started a new lap",
      "fields": [
        { "name": "MarbleId", "type": "irr::s32", "comment": "ID of the marble" },
        { "name": "LapNo"   , "type": "irr::s32", "comment": "Number of the started lap" }
      ]
    },
    "PlayerFinished": {
      "comment": "A player has finished the race",
      "fields": [
        { "name": "MarbleId", "type": "irr::s32", "comment": "ID of the finished marble" },
        { "name": "RaceTime", "type": "irr::u32", "comment": "Racetime of the finished player in simulation steps" },
        { "name": "Laps"    , "type": "irr::s32", "comment": "The number of laps the player has done" }
      ]
    },
    "RaceFinished": {
      "comment": "The race has ended",
      "fields": [
        { "name": "Cancelled", "type": "irr::u8", "comment": "A flag indicating whether or not the race was cancelled by a player" }
      ]
    },
    "Countdown": {
      "comment": "Countdown message before the start of the race",
      "fields": [
        { "name": "Tick", "type": "irr::u8", "comment": "The countdown tick (4 == Ready, 3, 2, 1, 0 == Go)" }
      ]
    },
    "MarbleControl": {
      "comment": "The control message for a marble",
      "fields": [
        { "name": "ObjectId", "type": "irr::s32", "comment": "The ID of the Marble" },
        { "name": "CtrlX"   , "type": "irr::s8" , "comment": "The X Control (steer)" },
        { "name": "CtrlY"   , "type": "irr::s8" , "comment": "The Y Control (throttle)" },
        { "name": "Brake"   , "type": "bool"    , "comment": "Is the brake active?" },
        { "name": "RearView", "type": "bool"    , "comment": "Does the player want to look back?" },
        { "name": "Respawn" , "type": "bool"    , "comment": "Is the manual respawn button pressed?" }
      ]
    },
    "CancelRace": {
      "comment": "This message cancels a race",
      "fields": [ ]
    }
  },
  "interfaces": [
    {
      "name": "DynamicThread",
      "send": [
        "StepMsg",
        "Countdown",
        "ObjectMoved",
        "MarbleMoved",
        "Trigger",
        "PlayerRespawn",
        "CameraRespawn",
        "PlayerStunned",
        "PlayerFinished",
        "RaceFinished",
        "Checkpoint",
        "LapStart"
      ],
      "receive": [
        "MarbleControl",
        "CancelRace"
      ]
    },
    {
      "name": "GameState",
      "send": [
        "MarbleControl",
        "CancelRace"
      ],
      "receive": [
        "StepMsg",
        "Countdown",
        "ObjectMoved",
        "MarbleMoved",
        "Trigger",
        "PlayerRespawn",
        "CameraRespawn",
        "PlayerStunned",
        "PlayerFinished",
        "RaceFinished",
        "Checkpoint",
        "LapStart"
      ]
    }
  ]
}